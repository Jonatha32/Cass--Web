{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\Carpeta de Pruebas - Holberton\\\\casse-web\\\\src\\\\pages\\\\MessagesPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { messagesService } from '../services/messagesService';\nimport { userService } from '../services/userService';\nimport { MessageCircle, Send, Search, User, Clock } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MessagesPage = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [conversations, setConversations] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [unsubscribeConversations, setUnsubscribeConversations] = useState(null);\n  const [unsubscribeMessages, setUnsubscribeMessages] = useState(null);\n\n  // Datos fake para demostración\n  const fakeConversations = [{\n    id: '1',\n    participantName: 'Carlos Tech',\n    participantId: 'user1',\n    lastMessage: '¿Sigue disponible el iPhone?',\n    lastMessageTime: new Date(Date.now() - 1000 * 60 * 30),\n    unreadCount: 2,\n    productTitle: 'iPhone 13 Pro Max',\n    avatar: null\n  }, {\n    id: '2',\n    participantName: 'Ana Mobile',\n    participantId: 'user3',\n    lastMessage: 'Perfecto, nos vemos mañana',\n    lastMessageTime: new Date(Date.now() - 1000 * 60 * 60 * 2),\n    unreadCount: 0,\n    productTitle: 'Samsung Galaxy S23',\n    avatar: null\n  }, {\n    id: '3',\n    participantName: 'Gaming Pro',\n    participantId: 'user5',\n    lastMessage: '¿Incluye los juegos?',\n    lastMessageTime: new Date(Date.now() - 1000 * 60 * 60 * 24),\n    unreadCount: 1,\n    productTitle: 'PlayStation 5',\n    avatar: null\n  }];\n  const fakeMessages = {\n    '1': [{\n      id: '1',\n      senderId: 'user1',\n      senderName: 'Carlos Tech',\n      message: 'Hola, ¿sigue disponible el iPhone?',\n      timestamp: new Date(Date.now() - 1000 * 60 * 60),\n      isMe: false\n    }, {\n      id: '2',\n      senderId: user === null || user === void 0 ? void 0 : user.uid,\n      senderName: (user === null || user === void 0 ? void 0 : user.displayName) || 'Tú',\n      message: 'Sí, está disponible. ¿Te interesa?',\n      timestamp: new Date(Date.now() - 1000 * 60 * 45),\n      isMe: true\n    }, {\n      id: '3',\n      senderId: 'user1',\n      senderName: 'Carlos Tech',\n      message: '¿Podríamos vernos para revisarlo?',\n      timestamp: new Date(Date.now() - 1000 * 60 * 30),\n      isMe: false\n    }]\n  };\n  useEffect(() => {\n    if (user) {\n      loadConversations();\n    }\n    return () => {\n      if (unsubscribeConversations) unsubscribeConversations();\n      if (unsubscribeMessages) unsubscribeMessages();\n    };\n  }, [user]);\n  const loadConversations = async () => {\n    try {\n      setLoading(true);\n\n      // Suscribirse a conversaciones en tiempo real\n      const unsubscribe = messagesService.subscribeToConversations(user.uid, async conversations => {\n        // Enriquecer conversaciones con datos de usuarios\n        const enrichedConversations = await Promise.all(conversations.map(async conv => {\n          const otherUserId = conv.participants.find(p => p !== user.uid);\n          if (otherUserId) {\n            try {\n              const otherUser = await userService.getUserById(otherUserId);\n              return {\n                ...conv,\n                participantName: (otherUser === null || otherUser === void 0 ? void 0 : otherUser.name) || 'Usuario',\n                participantId: otherUserId,\n                avatar: otherUser === null || otherUser === void 0 ? void 0 : otherUser.photoUrl\n              };\n            } catch (error) {\n              return {\n                ...conv,\n                participantName: 'Usuario',\n                participantId: otherUserId,\n                avatar: null\n              };\n            }\n          }\n          return conv;\n        }));\n        setConversations(enrichedConversations);\n        setLoading(false);\n      });\n      setUnsubscribeConversations(() => unsubscribe);\n\n      // Si no hay conversaciones, usar datos fake como fallback\n      setTimeout(() => {\n        if (conversations.length === 0) {\n          setConversations(fakeConversations);\n          setLoading(false);\n        }\n      }, 2000);\n    } catch (error) {\n      console.error('Error loading conversations:', error);\n      setConversations(fakeConversations);\n      setLoading(false);\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() || !selectedChat) return;\n    try {\n      await messagesService.sendMessage(selectedChat.id, user.uid, user.displayName || user.email, newMessage);\n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n      toast.error('Error al enviar mensaje');\n    }\n  };\n  const selectChat = async conversation => {\n    setSelectedChat(conversation);\n\n    // Limpiar suscripción anterior\n    if (unsubscribeMessages) {\n      unsubscribeMessages();\n    }\n    try {\n      // Suscribirse a mensajes en tiempo real\n      const unsubscribe = messagesService.subscribeToMessages(conversation.id, messages => {\n        const processedMessages = messages.map(msg => {\n          var _msg$timestamp;\n          return {\n            ...msg,\n            isMe: msg.senderId === user.uid,\n            timestamp: ((_msg$timestamp = msg.timestamp) === null || _msg$timestamp === void 0 ? void 0 : _msg$timestamp.toDate()) || new Date()\n          };\n        });\n        setMessages(processedMessages);\n      });\n      setUnsubscribeMessages(() => unsubscribe);\n\n      // Marcar mensajes como leídos\n      await messagesService.markAsRead(conversation.id, user.uid);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n      // Usar mensajes fake como fallback\n      setMessages(fakeMessages[conversation.id] || []);\n    }\n  };\n  const formatTime = date => {\n    const now = new Date();\n    const diff = now - date;\n    if (diff < 1000 * 60 * 60) {\n      return `${Math.floor(diff / (1000 * 60))}m`;\n    } else if (diff < 1000 * 60 * 60 * 24) {\n      return `${Math.floor(diff / (1000 * 60 * 60))}h`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n  const filteredConversations = conversations.filter(conv => conv.participantName.toLowerCase().includes(searchTerm.toLowerCase()) || conv.productTitle.toLowerCase().includes(searchTerm.toLowerCase()));\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n          className: \"w-16 h-16 text-gray-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-800 mb-4\",\n          children: \"Debes iniciar sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Inicia sesi\\xF3n para ver tus mensajes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-[#205781] text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n            className: \"w-8 h-8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-3xl font-bold\",\n              children: \"Mensajes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-100 mt-1\",\n              children: [conversations.length, \" conversaciones\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-lg overflow-hidden\",\n        style: {\n          height: '70vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex h-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-1/3 border-r border-gray-200 flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-b border-gray-200\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(Search, {\n                  className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Buscar conversaciones...\",\n                  value: searchTerm,\n                  onChange: e => setSearchTerm(e.target.value),\n                  className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#205781] focus:border-transparent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 overflow-y-auto\",\n              children: filteredConversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-8 text-center\",\n                children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n                  className: \"w-12 h-12 text-gray-300 mx-auto mb-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500\",\n                  children: \"No hay conversaciones\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this) : filteredConversations.map(conversation => /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => selectChat(conversation),\n                className: `p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${(selectedChat === null || selectedChat === void 0 ? void 0 : selectedChat.id) === conversation.id ? 'bg-blue-50 border-l-4 border-l-[#205781]' : ''}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-start space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-12 h-12 bg-[#205781] bg-opacity-10 rounded-full flex items-center justify-center flex-shrink-0\",\n                    children: /*#__PURE__*/_jsxDEV(User, {\n                      className: \"w-6 h-6 text-[#205781]\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1 min-w-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"text-sm font-semibold text-gray-800 truncate\",\n                        children: conversation.participantName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 293,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center space-x-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-gray-500\",\n                          children: formatTime(conversation.lastMessageTime)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 297,\n                          columnNumber: 31\n                        }, this), conversation.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center\",\n                          children: conversation.unreadCount\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 301,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 296,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500 mb-1 truncate\",\n                      children: conversation.productTitle\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-600 truncate\",\n                      children: conversation.lastMessage\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 23\n                }, this)\n              }, conversation.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 flex flex-col\",\n            children: selectedChat ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-b border-gray-200 bg-gray-50\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-10 h-10 bg-[#205781] bg-opacity-10 rounded-full flex items-center justify-center\",\n                    children: /*#__PURE__*/_jsxDEV(User, {\n                      className: \"w-5 h-5 text-[#205781]\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"font-semibold text-gray-800\",\n                      children: selectedChat.participantName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 332,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: selectedChat.productTitle\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 331,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n                children: messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `flex ${message.isMe ? 'justify-end' : 'justify-start'}`,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${message.isMe ? 'bg-[#205781] text-white' : 'bg-gray-200 text-gray-800'}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm\",\n                      children: message.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-end mt-1 space-x-1\",\n                      children: [/*#__PURE__*/_jsxDEV(Clock, {\n                        className: \"w-3 h-3 opacity-70\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 358,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs opacity-70\",\n                        children: message.timestamp.toLocaleTimeString([], {\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 359,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 349,\n                    columnNumber: 25\n                  }, this)\n                }, message.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: newMessage,\n                    onChange: e => setNewMessage(e.target.value),\n                    onKeyPress: e => e.key === 'Enter' && handleSendMessage(),\n                    placeholder: \"Escribe un mensaje...\",\n                    className: \"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-[#205781] focus:border-transparent\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSendMessage,\n                    disabled: !newMessage.trim(),\n                    className: \"bg-[#205781] text-white p-2 rounded-full hover:bg-opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                    children: /*#__PURE__*/_jsxDEV(Send, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 387,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n                  className: \"w-16 h-16 text-gray-300 mx-auto mb-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-gray-600 mb-2\",\n                  children: \"Selecciona una conversaci\\xF3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500\",\n                  children: \"Elige una conversaci\\xF3n para comenzar a chatear\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n_s(MessagesPage, \"KO2Ln0YtKA+YXcJgemsagtJBWVQ=\", false, function () {\n  return [useAuth];\n});\n_c = MessagesPage;\nexport default MessagesPage;\nvar _c;\n$RefreshReg$(_c, \"MessagesPage\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","messagesService","userService","MessageCircle","Send","Search","User","Clock","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","MessagesPage","_s","user","conversations","setConversations","selectedChat","setSelectedChat","messages","setMessages","newMessage","setNewMessage","searchTerm","setSearchTerm","loading","setLoading","unsubscribeConversations","setUnsubscribeConversations","unsubscribeMessages","setUnsubscribeMessages","fakeConversations","id","participantName","participantId","lastMessage","lastMessageTime","Date","now","unreadCount","productTitle","avatar","fakeMessages","senderId","senderName","message","timestamp","isMe","uid","displayName","loadConversations","unsubscribe","subscribeToConversations","enrichedConversations","Promise","all","map","conv","otherUserId","participants","find","p","otherUser","getUserById","name","photoUrl","error","setTimeout","length","console","handleSendMessage","trim","sendMessage","email","selectChat","conversation","subscribeToMessages","processedMessages","msg","_msg$timestamp","toDate","markAsRead","formatTime","date","diff","Math","floor","toLocaleDateString","filteredConversations","filter","toLowerCase","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","height","type","placeholder","value","onChange","e","target","onClick","toLocaleTimeString","hour","minute","onKeyPress","key","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Usuario/Desktop/Carpeta de Pruebas - Holberton/casse-web/src/pages/MessagesPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { messagesService } from '../services/messagesService';\nimport { userService } from '../services/userService';\nimport { MessageCircle, Send, Search, User, Clock } from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nconst MessagesPage = () => {\n  const { user } = useAuth();\n  const [conversations, setConversations] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [unsubscribeConversations, setUnsubscribeConversations] = useState(null);\n  const [unsubscribeMessages, setUnsubscribeMessages] = useState(null);\n\n  // Datos fake para demostración\n  const fakeConversations = [\n    {\n      id: '1',\n      participantName: 'Carlos Tech',\n      participantId: 'user1',\n      lastMessage: '¿Sigue disponible el iPhone?',\n      lastMessageTime: new Date(Date.now() - 1000 * 60 * 30),\n      unreadCount: 2,\n      productTitle: 'iPhone 13 Pro Max',\n      avatar: null\n    },\n    {\n      id: '2',\n      participantName: 'Ana Mobile',\n      participantId: 'user3',\n      lastMessage: 'Perfecto, nos vemos mañana',\n      lastMessageTime: new Date(Date.now() - 1000 * 60 * 60 * 2),\n      unreadCount: 0,\n      productTitle: 'Samsung Galaxy S23',\n      avatar: null\n    },\n    {\n      id: '3',\n      participantName: 'Gaming Pro',\n      participantId: 'user5',\n      lastMessage: '¿Incluye los juegos?',\n      lastMessageTime: new Date(Date.now() - 1000 * 60 * 60 * 24),\n      unreadCount: 1,\n      productTitle: 'PlayStation 5',\n      avatar: null\n    }\n  ];\n\n  const fakeMessages = {\n    '1': [\n      {\n        id: '1',\n        senderId: 'user1',\n        senderName: 'Carlos Tech',\n        message: 'Hola, ¿sigue disponible el iPhone?',\n        timestamp: new Date(Date.now() - 1000 * 60 * 60),\n        isMe: false\n      },\n      {\n        id: '2',\n        senderId: user?.uid,\n        senderName: user?.displayName || 'Tú',\n        message: 'Sí, está disponible. ¿Te interesa?',\n        timestamp: new Date(Date.now() - 1000 * 60 * 45),\n        isMe: true\n      },\n      {\n        id: '3',\n        senderId: 'user1',\n        senderName: 'Carlos Tech',\n        message: '¿Podríamos vernos para revisarlo?',\n        timestamp: new Date(Date.now() - 1000 * 60 * 30),\n        isMe: false\n      }\n    ]\n  };\n\n  useEffect(() => {\n    if (user) {\n      loadConversations();\n    }\n    \n    return () => {\n      if (unsubscribeConversations) unsubscribeConversations();\n      if (unsubscribeMessages) unsubscribeMessages();\n    };\n  }, [user]);\n\n  const loadConversations = async () => {\n    try {\n      setLoading(true);\n      \n      // Suscribirse a conversaciones en tiempo real\n      const unsubscribe = messagesService.subscribeToConversations(\n        user.uid,\n        async (conversations) => {\n          // Enriquecer conversaciones con datos de usuarios\n          const enrichedConversations = await Promise.all(\n            conversations.map(async (conv) => {\n              const otherUserId = conv.participants.find(p => p !== user.uid);\n              if (otherUserId) {\n                try {\n                  const otherUser = await userService.getUserById(otherUserId);\n                  return {\n                    ...conv,\n                    participantName: otherUser?.name || 'Usuario',\n                    participantId: otherUserId,\n                    avatar: otherUser?.photoUrl\n                  };\n                } catch (error) {\n                  return {\n                    ...conv,\n                    participantName: 'Usuario',\n                    participantId: otherUserId,\n                    avatar: null\n                  };\n                }\n              }\n              return conv;\n            })\n          );\n          \n          setConversations(enrichedConversations);\n          setLoading(false);\n        }\n      );\n      \n      setUnsubscribeConversations(() => unsubscribe);\n      \n      // Si no hay conversaciones, usar datos fake como fallback\n      setTimeout(() => {\n        if (conversations.length === 0) {\n          setConversations(fakeConversations);\n          setLoading(false);\n        }\n      }, 2000);\n      \n    } catch (error) {\n      console.error('Error loading conversations:', error);\n      setConversations(fakeConversations);\n      setLoading(false);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() || !selectedChat) return;\n\n    try {\n      await messagesService.sendMessage(\n        selectedChat.id,\n        user.uid,\n        user.displayName || user.email,\n        newMessage\n      );\n      \n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n      toast.error('Error al enviar mensaje');\n    }\n  };\n\n  const selectChat = async (conversation) => {\n    setSelectedChat(conversation);\n    \n    // Limpiar suscripción anterior\n    if (unsubscribeMessages) {\n      unsubscribeMessages();\n    }\n    \n    try {\n      // Suscribirse a mensajes en tiempo real\n      const unsubscribe = messagesService.subscribeToMessages(\n        conversation.id,\n        (messages) => {\n          const processedMessages = messages.map(msg => ({\n            ...msg,\n            isMe: msg.senderId === user.uid,\n            timestamp: msg.timestamp?.toDate() || new Date()\n          }));\n          setMessages(processedMessages);\n        }\n      );\n      \n      setUnsubscribeMessages(() => unsubscribe);\n      \n      // Marcar mensajes como leídos\n      await messagesService.markAsRead(conversation.id, user.uid);\n      \n    } catch (error) {\n      console.error('Error loading messages:', error);\n      // Usar mensajes fake como fallback\n      setMessages(fakeMessages[conversation.id] || []);\n    }\n  };\n\n  const formatTime = (date) => {\n    const now = new Date();\n    const diff = now - date;\n    \n    if (diff < 1000 * 60 * 60) {\n      return `${Math.floor(diff / (1000 * 60))}m`;\n    } else if (diff < 1000 * 60 * 60 * 24) {\n      return `${Math.floor(diff / (1000 * 60 * 60))}h`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n\n  const filteredConversations = conversations.filter(conv =>\n    conv.participantName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    conv.productTitle.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <MessageCircle className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">\n            Debes iniciar sesión\n          </h2>\n          <p className=\"text-gray-600\">\n            Inicia sesión para ver tus mensajes\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-[#205781] text-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center space-x-3\">\n            <MessageCircle className=\"w-8 h-8\" />\n            <div>\n              <h1 className=\"text-3xl font-bold\">Mensajes</h1>\n              <p className=\"text-blue-100 mt-1\">\n                {conversations.length} conversaciones\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-white rounded-2xl shadow-lg overflow-hidden\" style={{ height: '70vh' }}>\n          <div className=\"flex h-full\">\n            {/* Sidebar - Lista de conversaciones */}\n            <div className=\"w-1/3 border-r border-gray-200 flex flex-col\">\n              {/* Search */}\n              <div className=\"p-4 border-b border-gray-200\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Buscar conversaciones...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#205781] focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              {/* Conversations List */}\n              <div className=\"flex-1 overflow-y-auto\">\n                {filteredConversations.length === 0 ? (\n                  <div className=\"p-8 text-center\">\n                    <MessageCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n                    <p className=\"text-gray-500\">No hay conversaciones</p>\n                  </div>\n                ) : (\n                  filteredConversations.map((conversation) => (\n                    <div\n                      key={conversation.id}\n                      onClick={() => selectChat(conversation)}\n                      className={`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${\n                        selectedChat?.id === conversation.id ? 'bg-blue-50 border-l-4 border-l-[#205781]' : ''\n                      }`}\n                    >\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"w-12 h-12 bg-[#205781] bg-opacity-10 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <User className=\"w-6 h-6 text-[#205781]\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center justify-between\">\n                            <h3 className=\"text-sm font-semibold text-gray-800 truncate\">\n                              {conversation.participantName}\n                            </h3>\n                            <div className=\"flex items-center space-x-2\">\n                              <span className=\"text-xs text-gray-500\">\n                                {formatTime(conversation.lastMessageTime)}\n                              </span>\n                              {conversation.unreadCount > 0 && (\n                                <span className=\"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center\">\n                                  {conversation.unreadCount}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                          <p className=\"text-xs text-gray-500 mb-1 truncate\">\n                            {conversation.productTitle}\n                          </p>\n                          <p className=\"text-sm text-gray-600 truncate\">\n                            {conversation.lastMessage}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n\n            {/* Chat Area */}\n            <div className=\"flex-1 flex flex-col\">\n              {selectedChat ? (\n                <>\n                  {/* Chat Header */}\n                  <div className=\"p-4 border-b border-gray-200 bg-gray-50\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 bg-[#205781] bg-opacity-10 rounded-full flex items-center justify-center\">\n                        <User className=\"w-5 h-5 text-[#205781]\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-gray-800\">\n                          {selectedChat.participantName}\n                        </h3>\n                        <p className=\"text-sm text-gray-500\">\n                          {selectedChat.productTitle}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Messages */}\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                    {messages.map((message) => (\n                      <div\n                        key={message.id}\n                        className={`flex ${message.isMe ? 'justify-end' : 'justify-start'}`}\n                      >\n                        <div\n                          className={`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${\n                            message.isMe\n                              ? 'bg-[#205781] text-white'\n                              : 'bg-gray-200 text-gray-800'\n                          }`}\n                        >\n                          <p className=\"text-sm\">{message.message}</p>\n                          <div className=\"flex items-center justify-end mt-1 space-x-1\">\n                            <Clock className=\"w-3 h-3 opacity-70\" />\n                            <span className=\"text-xs opacity-70\">\n                              {message.timestamp.toLocaleTimeString([], {\n                                hour: '2-digit',\n                                minute: '2-digit'\n                              })}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Message Input */}\n                  <div className=\"p-4 border-t border-gray-200\">\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"text\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n                        placeholder=\"Escribe un mensaje...\"\n                        className=\"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-[#205781] focus:border-transparent\"\n                      />\n                      <button\n                        onClick={handleSendMessage}\n                        disabled={!newMessage.trim()}\n                        className=\"bg-[#205781] text-white p-2 rounded-full hover:bg-opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        <Send className=\"w-5 h-5\" />\n                      </button>\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <div className=\"flex-1 flex items-center justify-center\">\n                  <div className=\"text-center\">\n                    <MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-semibold text-gray-600 mb-2\">\n                      Selecciona una conversación\n                    </h3>\n                    <p className=\"text-gray-500\">\n                      Elige una conversación para comenzar a chatear\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessagesPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}