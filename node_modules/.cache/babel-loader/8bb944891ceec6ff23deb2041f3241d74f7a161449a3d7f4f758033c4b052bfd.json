{"ast":null,"code":"import _objectSpread from\"c:/Users/Usuario/Desktop/Carpeta de Pruebas - Holberton/casse-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{doc,getDoc,setDoc,updateDoc,collection,query,where,getDocs}from'firebase/firestore';import{db}from'./firebase';export const userService={// Obtener usuario por ID\nasync getUserById(userId){try{const userDoc=await getDoc(doc(db,'users',userId));if(userDoc.exists()){return _objectSpread({id:userDoc.id},userDoc.data());}return null;}catch(error){console.error('Error getting user:',error);throw error;}},// Crear o actualizar perfil de usuario\nasync updateUserProfile(userId,userData){try{const userRef=doc(db,'users',userId);await setDoc(userRef,_objectSpread(_objectSpread({},userData),{},{updatedAt:new Date()}),{merge:true});return true;}catch(error){console.error('Error updating user profile:',error);throw error;}},// Buscar usuarios por nombre\nasync searchUsers(searchTerm){try{const q=query(collection(db,'users'),where('name','>=',searchTerm),where('name','<=',searchTerm+'\\uf8ff'));const querySnapshot=await getDocs(q);return querySnapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));}catch(error){console.error('Error searching users:',error);throw error;}},// Obtener estadísticas del usuario\nasync getUserStats(userId){try{// Obtener productos del usuario\nconst productsQuery=query(collection(db,'articulos'),where('ownerId','==',userId));const productsSnapshot=await getDocs(productsQuery);// Obtener favoritos del usuario\nconst favoritesQuery=query(collection(db,'favorites'),where('userId','==',userId));const favoritesSnapshot=await getDocs(favoritesQuery);return{totalProducts:productsSnapshot.size,totalFavorites:favoritesSnapshot.size,totalSales:0,// Implementar cuando tengamos sistema de ventas\nrating:5.0// Implementar cuando tengamos sistema de ratings\n};}catch(error){console.error('Error getting user stats:',error);return{totalProducts:0,totalFavorites:0,totalSales:0,rating:5.0};}}};","map":{"version":3,"names":["doc","getDoc","setDoc","updateDoc","collection","query","where","getDocs","db","userService","getUserById","userId","userDoc","exists","_objectSpread","id","data","error","console","updateUserProfile","userData","userRef","updatedAt","Date","merge","searchUsers","searchTerm","q","querySnapshot","docs","map","getUserStats","productsQuery","productsSnapshot","favoritesQuery","favoritesSnapshot","totalProducts","size","totalFavorites","totalSales","rating"],"sources":["c:/Users/Usuario/Desktop/Carpeta de Pruebas - Holberton/casse-web/src/services/userService.js"],"sourcesContent":["import { \n  doc, \n  getDoc, \n  setDoc, \n  updateDoc, \n  collection, \n  query, \n  where, \n  getDocs \n} from 'firebase/firestore';\nimport { db } from './firebase';\n\nexport const userService = {\n  // Obtener usuario por ID\n  async getUserById(userId) {\n    try {\n      const userDoc = await getDoc(doc(db, 'users', userId));\n      if (userDoc.exists()) {\n        return {\n          id: userDoc.id,\n          ...userDoc.data()\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error('Error getting user:', error);\n      throw error;\n    }\n  },\n\n  // Crear o actualizar perfil de usuario\n  async updateUserProfile(userId, userData) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      await setDoc(userRef, {\n        ...userData,\n        updatedAt: new Date()\n      }, { merge: true });\n      \n      return true;\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      throw error;\n    }\n  },\n\n  // Buscar usuarios por nombre\n  async searchUsers(searchTerm) {\n    try {\n      const q = query(\n        collection(db, 'users'),\n        where('name', '>=', searchTerm),\n        where('name', '<=', searchTerm + '\\uf8ff')\n      );\n      \n      const querySnapshot = await getDocs(q);\n      return querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n    } catch (error) {\n      console.error('Error searching users:', error);\n      throw error;\n    }\n  },\n\n  // Obtener estadísticas del usuario\n  async getUserStats(userId) {\n    try {\n      // Obtener productos del usuario\n      const productsQuery = query(\n        collection(db, 'articulos'),\n        where('ownerId', '==', userId)\n      );\n      const productsSnapshot = await getDocs(productsQuery);\n      \n      // Obtener favoritos del usuario\n      const favoritesQuery = query(\n        collection(db, 'favorites'),\n        where('userId', '==', userId)\n      );\n      const favoritesSnapshot = await getDocs(favoritesQuery);\n\n      return {\n        totalProducts: productsSnapshot.size,\n        totalFavorites: favoritesSnapshot.size,\n        totalSales: 0, // Implementar cuando tengamos sistema de ventas\n        rating: 5.0 // Implementar cuando tengamos sistema de ratings\n      };\n    } catch (error) {\n      console.error('Error getting user stats:', error);\n      return {\n        totalProducts: 0,\n        totalFavorites: 0,\n        totalSales: 0,\n        rating: 5.0\n      };\n    }\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}